<!-- Load styles from styles.css in the static folder-->
<head>
    {% load static %}
    <link rel="stylesheet" href="{% static 'styles.css' %}">
</head>
<h1>News Classification</h1>
<!-- show today's date-->
<h3 id = 'date'></h3>
<!-- java script for getting today's date-->
<script>
    var date = new Date();
    var dd = date.getDate();
    // source code error, getMonth() default is 0 - 11
    var mm = date.getMonth() + 1;
    var yyyy = date.getFullYear();
    if(dd<10){
        dd = '0' + dd;
    }
    if (mm<10){
        mm='0'+mm;
    }
    document.getElementById('date').innerHTML = yyyy + '-' + mm + '-' + dd;
</script>
<!-- a search bar for news searching by urls-->

<form action = 'search' method = 'get'>
    <label for = 'url'>Enter a url: </label>
    <input id = 'url' type = 'text' name = 'url' value = ''>
</br>
    <input type = 'submit' value = 'submit'>
</form>
{% if predict_news%}
{% for i in predict_news%}
<p>{{i}}</p>
{%endfor%}
{% endif %}
<!-- button to redirect user to logout page and logout their account-->
<a style = 'margin-left:75%' href="../logout">Logout</a>


<!-- button for getting daily news-->
<form action = get_daily_news>
    <button type='submit'> Get daily news</button>
</form>
<!-- a drop down list contain category-->
<label for="category">Choose category</label>
<br>
<select id = 'category' onchange="update()">
    <option>--</option>
    {% for c in categories %}
    <option>{{c.categoryname}}</option>
    {% endfor %}
</select>
<br>

<script>
    function update(){
        var selected = document.getElementById('category');
        selected = selected.options[selected.selectedIndex].text;
        var trs = document.querySelectorAll('tr');
            for(var i = 1; i < trs.length; i++){
                var td = trs[i].querySelectorAll("td")[1];
                if (td.innerHTML === selected){
                    trs[i].style.display = "table-row";
                }
                else{
                    trs[i].style.display = "none";
                }
            }
    }
    function check(){
        return 'yes';
    }
</script>
<table id = 'news_table'>
    <tr>
        <th>Title</th>
        <th>Category</th>
    </tr>
        {% for news in newsarticles %}
        <tr id = '{{news.date}}'>
        <td>{{news.title}}
            <br>
            <a style = 'text-align:center' href={{news.url}} target="_blank">To the new</a>
        </td>
        <td>{{news.categoryid}}</td>
        </tr>
        {%endfor%}
</table>

<style>
    p {text-align: center;}
    input{
        margin: auto;
        display: block;
        width: 300px;
    }
    table{
        border:1px solid black;
        width: 75%;
        margin-left: auto;
        margin-right: auto;
    }
    th,td{
        border:1px solid black;
        text-align:center;
    }
</style>

